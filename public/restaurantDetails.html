<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body onload="loadRestaurantOnPage(), getReviewData()">
    <div w3-include-html="top-navigation.html"></div>
    <div class="row">
        <div id="restaurantCarou" class="carousel slide, col-5" data-ride="carousel">
            <ul class="carousel-indicators">
                <li data-target="#demo" data-slide-to="0" class="active"></li>
                <li data-target="#demo" data-slide-to="1"></li>
                <li data-target="#demo" data-slide-to="2"></li>
            </ul>
            <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                    <img src="/assets/placeholder.png" id="carouselFirst">
                </div>
                <div class="carousel-item">
                    <img src="/assets/Logo.png" id="carouselSecond">
                </div>
                <div class="carousel-item">
                    <img src="/assets/placeholder.png" id="carouselThird">
                </div>
            </div>

            <a class="carousel-control-prev" href="#demo" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#demo" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>
        </div>
        <div id="restaurantDetails" class="col padLeft">
            <div>
                <label id="restaurantName" style="font-size: x-large;">never gonna give you up</label>
            </div>
            <div>
                <label id="restaurantDescription">never gonna give you up</label>
            </div>
            <div>
                <label id="restaurantAddress">never gonna give you up</label>
            </div>
            <div>
                <label id="restaurantCuisine">never gonna give you up</label>
            </div>
            <div>
                <!-- TODO: GOOGLE MAPS API -->
                GOOGLE MAPS API SHTI HERE
            </div>
            <!-- TODO: price jars
            <div>
                <label id="restaurantDescription">never gonna give you up</label>
            </div> -->
        </div>
    </div>
    <div class="row" >
        <div id="reviewBody" class="col-md-6 text-right" style="max-width: 95%; margin: auto;">
            <label style="padding-left:15px;cursor:pointer" id="reviewRestaurant"></label>
            <div class="card card-text" style="word-wrap: break-word;">
                <label style="padding-left:15px;cursor:pointer" id="emptyReview"></label>
            </div>
        </div>

        <div class="col-md-6 text-right padLeft" id="reviewCard">
            <div class="card card-text" style="word-wrap: break-word;">
                <label>Type your review here:</label>

                Review Title:
                <input type="text" id="reviewTitle" placeholder="Type your title here">
                Rating:
                <div id="reviewRatings">
                    <img src="assets/Icon.png" class="jar" value='1' style="cursor:pointer" onmousedown="rateIt(this)">
                    <img src="assets/Icon.png" class="jar" value='2' style="cursor:pointer" onmousedown="rateIt(this)">
                    <img src="assets/Icon.png" class="jar" value="3" style="cursor:pointer" onmousedown="rateIt(this)">
                    <img src="assets/Icon.png" class="jar" value="4" style="cursor:pointer" onmousedown="rateIt(this)">
                    <img src="assets/Icon.png" class="jar" value="5" style="cursor:pointer" onmousedown="rateIt(this)">
                </div>
                Review:
                <textarea id="reviewText" rows="8" cols="100%" onkeydown="return true" oninput="countWord()"
                    placeholder="Type your review here"></textarea>
                <label> Current word count: <label id="reviewCount" style="display: inline;">0</label></label>
                <label> Remaining words: <label id="reviewRemainingCount" style="display: inline;">150</label></label>

                <input type="submit" id="reviewSubmit" onclick="addReview() ">
            </div>
        </div>
    </div>
    <script src="https://w3schools.com/lib/w3.js"></script>
    <script>
        w3.includeHTML();
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/86ec7c1143.js"></script>
    <script src="js/app.js"></script>
    <script src="js/restaurant.js"></script>
    <script src="js/loginOut.js"></script>
    <script src="js/checkToken.js"></script>
    <script src="js/reviews.js"></script>
    <script>
        document.querySelector("#reviewText").addEventListener("input", function countWord() {
            let wordsLimit = 150
            let res = [];
            let str = this.value.replace(/[\t\n\r\.\?\!]/gm, " ").split(" ");
            str.map((s) => {
                let trimStr = s.trim();
                if (trimStr.length > 0) {
                    res.push(trimStr);
                    wordsLimit -= 1
                }
            });
            document.querySelector("#reviewCount").innerText = res.length;
            console.log('res.length: ', res.length);
            document.querySelector("#reviewRemainingCount").innerText = wordsLimit;

            //TODO: fix backspace
            if (res.length >= 150) {
                document.body.onkeydown = function () {
                    return false
                };
                document.getElementById("reviewRemainingCount").style = "color: red;";
            }
        });
    </script>

    <!-- <div w3-include-html="footer.html"></div> -->
    <footer>
        (not) Copyright &copy; Jarvis 12/1/2022
    </footer>
</body>

</html>